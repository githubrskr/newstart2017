<?xml version="1.0" encoding="UTF-8"?>
<sequence xmlns="http://ws.apache.org/ns/synapse" name="PensionsOnlineDigitalServiceAuth">
	<property name="username" expression="get-property('system','uk.gov.hmrc.wso2.esb.etmp.username')" scope="default" type="STRING" description="retrieve username" />
	<property name="password" expression="get-property('system','uk.gov.hmrc.wso2.esb.etmp.password')" scope="default" type="STRING" description="retrieve password" />      
	<property name="responseType" expression="$trp:Accept" scope="default" type="STRING" />
	<header name="Authorization" scope="transport" action="remove" description="remove Authorization header" />
	<property name="access" expression="fn:concat($ctx:username,':',$ctx:password)" scope="default" type="STRING" description="format username and password" />
	<header name="Authorization" scope="transport" expression="fn:concat('Basic ', base64Encode($ctx:access))" description="Add Authorization header" />  
</sequence>